<!doctype html>
<html data-status="in-progress">
<head>
	<link rel="stylesheet" href="../common.css">
	<style>
	#sandbox {
		width: 100%;
		height: 100%;
	}

	.turtle {
		fill: white;
	}

	path {
		stroke-width: 5;
		/*stroke-dasharray: 300;
		stroke-dashoffset: 200;

		-webkit-transition: stroke-dashoffset 1s;*/
	}

	/*path:hover {
		stroke: blue;
		stroke-dashoffset: 0;
	}*/
	</style>
	<script src="turtle.js"></script>
</head>
<body>
	<!--<svg>
		<path id="stroke-animpath" d="M0,0L100,0"></path>
	</svg>
	<svg>
		<path id="d-animpath" d="M0,0L100,0L100,100">
			<animate
				id="anim"
				attributeName="d"
				from="M0,0L100,0L100,0"
				to="M0,0L100,0L100,100"
				dur="2s"
				repeatCount="1">
			</animate>			
		</path>
		<path id="current"
		></path>	-->	
		<path id="turtle"
			d="M-10,-10L10,0L-10,10Z">
			<animateMotion dur="113ms"
			repeatCount="1" rotate="auto" 
			path="M100,0L100,100" fill="freeze" onend="bar(event);">
			</animateMotion>
		</path>
	</svg>
	<svg id="sandbox">
	</svg>
	<script>
		/*var a = document.getElementById('anim');
		console.log(a);

		function foo(e) {
			var t = e.target;
			var attr = t.attributes.attributeName.value;
			var to = t.attributes.to.value;
			t.parentElement.setAttribute(attr, to);
		}

		function bar(e) {
			var t = e.target;
			t.parentElement.setAttribute('transform',
				'translate(100 100) rotate(45)');
			console.log(t.parentElement.removeChild(t));
		}
		a.onend = foo;
		*/		
		var sandbox = document.getElementById('sandbox');				
		sandbox.addEventListener('load', function main() {
			var sandbox = document.getElementById('sandbox');		
			window.turtle = new Turtle(sandbox);

			var segs = 10;
			for (var i = 0; i != segs; ++i) {
				turtle.forward(20);
				turtle.turn(2 * Math.PI / segs);
			}

			turtle.moveTo(100, 100);
			var segs = 5;
			for (var i = 0; i != segs; ++i) {
				turtle.forward(20);
				turtle.turn(2 * Math.PI / segs);
			}

			turtle.moveTo(200, 200);
			turtle.animate = '10s';
			turtle.curve(100, 100, 200, 50, -100, 0);
		});

	</script>	
</body>
</html>